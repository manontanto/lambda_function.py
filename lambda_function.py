'''
awsサーバーに設置予定
  11/9, 2021 Alexaプログラム「次の電車は?」 
  目黒線 時刻表改正(2021-03-13)
  with 日本の祝日
  cf. https://techblog.gmo-ap.jp/2020/01/08/alexa_skill_with_lamba/
'''
import time
from datetime import datetime, timedelta, timezone
import jpholiday

def Train(TBdic, imaHour, imaMinute): # ima is int
    nextTr = []
    nextTr = [ v for v in TBdic[imaHour] if v > imaMinute ]
    l = len(nextTr)
    if imaHour != 0 and l < 3:
        if imaHour == 23:
            imaHour = -1
        nextTr.extend(TBdic[imaHour + 1])
    return nextTr[0:3]

def lambda_handler(event, context):
    # Up or Down from slots
    request = event['request']
    intent_name = request['intent']['name']
    intent_slots = request['intent']['slots']
    UD = intent_slots['updown']['value']
    if UD == '上り':
        UpDown = 1;
    else:
        UpDown =0
   
    JST = timezone(timedelta(hours=+9), 'JST')
    jsttime = datetime.now(JST) + timedelta(minutes=7) # 7 minutes to the station
    StCode = "00004800"

    MeguroTimeTable = {}
    MeguroTimeTable = {
"00007964_weekday_0": {"title": "目黒線 武蔵小山駅 平日 上り 時刻表  取得日時: 2021-11-08 18:50:25",{0:['7分各駅停車目黒いき','21分各駅停車目黒いき','34分各駅停車目黒いき'],5:['7分各駅停車西高島平いき','20分各駅停車西高島平いき','32分各駅停車浦和美園いき','42分各駅停車浦和美園いき','47分各駅停車西高島平いき','54分各駅停車浦和美園いき','59分各駅停車西高島平いき'],6:['5分各駅停車浦和美園いき','14分各駅停車西高島平いき','18分急行浦和美園いき','25分各駅停車浦和美園いき','28分各駅停車西高島平いき','35分各駅停車浦和美園いき','42分各駅停車浦和美園いき','46分各駅停車西高島平いき','50分各駅停車西高島平いき','55分各駅停車浦和美園いき','58分各駅停車西高島平いき'],7:['2分各駅停車浦和美園いき','5分各駅停車鳩ヶ谷いき','8分各駅停車西高島平いき','12分各駅停車浦和美園いき','16分急行西高島平いき','17分各駅停車浦和美園いき','20分各駅停車西高島平いき','23分各駅停車浦和美園いき','27分急行西高島平いき','28分各駅停車鳩ヶ谷いき','31分各駅停車西高島平いき','36分急行浦和美園いき','37分各駅停車西高島平いき','42分急行鳩ヶ谷いき','43分各駅停車西高島平いき','47分急行浦和美園いき','48分各駅停車鳩ヶ谷いき','52分急行西高島平いき','53分各駅停車浦和美園いき','57分急行鳩ヶ谷いき','58分各駅停車西高島平いき'],8:['2分急行浦和美園いき','3分各駅停車西高島平いき','7分急行高島平いき','8分各駅停車鳩ヶ谷いき','12分急行西高島平いき','13分各駅停車浦和美園いき','17分急行王子神谷いき','18分各駅停車西高島平いき','22分急行浦和美園いき','23分各駅停車西高島平いき','27分急行高島平いき','28分各駅停車鳩ヶ谷いき','33分急行西高島平いき','34分各駅停車浦和美園いき','38分急行浦和美園いき','39分各駅停車西高島平いき','44分急行高島平いき','45分各駅停車浦和美園いき','49分各駅停車高島平いき','54分急行鳩ヶ谷いき','56分各駅停車高島平いき','59分各駅停車王子神谷いき'],9:['4分急行高島平いき','5分各駅停車西高島平いき','8分各駅停車鳩ヶ谷いき','13分急行西高島平いき','14分各駅停車浦和美園いき','18分各駅停車西高島平いき','24分急行浦和美園いき','25分各駅停車高島平いき','30分各駅停車西高島平いき','35分急行西高島平いき','36分各駅停車浦和美園いき','41分各駅停車西高島平いき','45分急行西高島平いき','47分各駅停車浦和美園いき','52分各駅停車西高島平いき','58分各駅停車西高島平いき'],10:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車高島平いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車西高島平いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],11:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],12:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],13:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],14:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],15:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],16:['3分急行西高島平いき','5分各駅停車赤羽岩淵いき','11分各駅停車浦和美園いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車浦和美園いき','41分各駅停車浦和美園いき','48分急行浦和美園いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],17:['3分急行西高島平いき','4分各駅停車浦和美園いき','10分各駅停車浦和美園いき','15分各駅停車浦和美園いき','20分急行西高島平いき','22分各駅停車浦和美園いき','25分各駅停車西高島平いき','29分各駅停車浦和美園いき','35分急行浦和美園いき','36分各駅停車西高島平いき','40分各駅停車浦和美園いき','46分急行西高島平いき','48分各駅停車浦和美園いき','54分各駅停車浦和美園いき','59分急行浦和美園いき'],18:['1分各駅停車西高島平いき','5分各駅停車西高島平いき','11分急行浦和美園いき','12分各駅停車浦和美園いき','17分各駅停車浦和美園いき','19分各駅停車西高島平いき','24分急行浦和美園いき','26分各駅停車西高島平いき','30分各駅停車浦和美園いき','34分各駅停車西高島平いき','40分急行浦和美園いき','42分各駅停車浦和美園いき','46分各駅停車西高島平いき','49分各駅停車西高島平いき','55分急行浦和美園いき','57分各駅停車浦和美園いき'],19:['1分各駅停車西高島平いき','5分各駅停車浦和美園いき','11分急行西高島平いき','12分各駅停車浦和美園いき','16分各駅停車西高島平いき','20分各駅停車浦和美園いき','24分急行西高島平いき','26分各駅停車浦和美園いき','30分各駅停車西高島平いき','34分各駅停車浦和美園いき','41分急行西高島平いき','42分各駅停車浦和美園いき','47分各駅停車西高島平いき','53分各駅停車浦和美園いき','59分急行西高島平いき'],20:['0分各駅停車浦和美園いき','4分各駅停車西高島平いき','7分各駅停車浦和美園いき','12分急行西高島平いき','13分各駅停車王子神谷いき','18分各駅停車西高島平いき','23分急行西高島平いき','25分各駅停車浦和美園いき','31分各駅停車浦和美園いき','36分各駅停車西高島平いき','42分各駅停車西高島平いき','50分急行浦和美園いき','51分各駅停車西高島平いき','57分各駅停車浦和美園いき'],21:['3分各駅停車浦和美園いき','11分急行西高島平いき','12分各駅停車浦和美園いき','17分各駅停車西高島平いき','22分各駅停車浦和美園いき','28分各駅停車西高島平いき','33分各駅停車浦和美園いき','38分各駅停車西高島平いき','45分急行浦和美園いき','47分各駅停車西高島平いき','52分各駅停車浦和美園いき','57分各駅停車浦和美園いき'],22:['3分各駅停車西高島平いき','9分各駅停車西高島平いき','15分急行浦和美園いき','17分各駅停車西高島平いき','23分各駅停車西高島平いき','28分各駅停車浦和美園いき','34分各駅停車西高島平いき','41分各駅停車西高島平いき','49分各駅停車浦和美園いき','56分急行西高島平いき','58分各駅停車浦和美園いき'],23:['4分各駅停車西高島平いき','11分各駅停車浦和美園いき','19分各駅停車西高島平いき','26分各駅停車西高島平いき','34分急行浦和美園いき','35分各駅停車西高島平いき','42分各駅停車浦和美園いき','50分各駅停車高島平いき','55分各駅停車浦和美園いき']}
MeguroTimeTable = {
"00007964_weekday_1": {"title": "目黒線 武蔵小山駅 平日 下り 時刻表  取得日時: 2021-11-08 18:50:26",{0:['4分各駅停車日吉（神奈川県）いき','10分各駅停車日吉（神奈川県）いき','19分各駅停車日吉（神奈川県）いき','25分各駅停車武蔵小杉いき','34分各駅停車奥沢いき'],5:['3分各駅停車日吉（神奈川県）いき','13分各駅停車日吉（神奈川県）いき','19分各駅停車日吉（神奈川県）いき','31分各駅停車日吉（神奈川県）いき','44分各駅停車日吉（神奈川県）いき','52分各駅停車日吉（神奈川県）いき','59分各駅停車日吉（神奈川県）いき'],6:['5分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','28分各駅停車日吉（神奈川県）いき','31分各駅停車日吉（神奈川県）いき','37分各駅停車日吉（神奈川県）いき','40分各駅停車日吉（神奈川県）いき','44分各駅停車日吉（神奈川県）いき','49分各駅停車日吉（神奈川県）いき','52分各駅停車日吉（神奈川県）いき','56分各駅停車日吉（神奈川県）いき'],7:['1分各駅停車日吉（神奈川県）いき','7分急行日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','12分各駅停車日吉（神奈川県）いき','14分各駅停車日吉（神奈川県）いき','17分各駅停車日吉（神奈川県）いき','20分各駅停車日吉（神奈川県）いき','22分各駅停車日吉（神奈川県）いき','25分各駅停車日吉（神奈川県）いき','30分急行日吉（神奈川県）いき','31分各駅停車日吉（神奈川県）いき','34分各駅停車日吉（神奈川県）いき','37分各駅停車日吉（神奈川県）いき','40分各駅停車日吉（神奈川県）いき','43分各駅停車日吉（神奈川県）いき','48分急行日吉（神奈川県）いき','49分各駅停車日吉（神奈川県）いき','52分各駅停車日吉（神奈川県）いき','55分各駅停車日吉（神奈川県）いき','59分各駅停車日吉（神奈川県）いき'],8:['2分各駅停車日吉（神奈川県）いき','6分急行日吉（神奈川県）いき','8分各駅停車日吉（神奈川県）いき','11分急行日吉（神奈川県）いき','13分各駅停車日吉（神奈川県）いき','15分各駅停車武蔵小杉いき','20分急行日吉（神奈川県）いき','21分各駅停車日吉（神奈川県）いき','25分急行日吉（神奈川県）いき','27分各駅停車日吉（神奈川県）いき','29分各駅停車日吉（神奈川県）いき','33分急行日吉（神奈川県）いき','34分各駅停車日吉（神奈川県）いき','37分各駅停車武蔵小杉いき','40分急行日吉（神奈川県）いき','42分各駅停車日吉（神奈川県）いき','44分各駅停車日吉（神奈川県）いき','47分各駅停車武蔵小杉いき','49分各駅停車日吉（神奈川県）いき','53分急行日吉（神奈川県）いき','55分各駅停車武蔵小杉いき','57分各駅停車日吉（神奈川県）いき'],9:['0分各駅停車日吉（神奈川県）いき','4分急行武蔵小杉いき','5分各駅停車日吉（神奈川県）いき','8分各駅停車日吉（神奈川県）いき','13分急行武蔵小杉いき','14分各駅停車日吉（神奈川県）いき','19分急行武蔵小杉いき','20分各駅停車日吉（神奈川県）いき','23分各駅停車武蔵小杉いき','26分各駅停車日吉（神奈川県）いき','31分急行日吉（神奈川県）いき','32分各駅停車武蔵小杉いき','36分各駅停車日吉（神奈川県）いき','39分各駅停車武蔵小杉いき','44分急行日吉（神奈川県）いき','45分各駅停車武蔵小杉いき','49分各駅停車日吉（神奈川県）いき','56分急行日吉（神奈川県）いき','58分各駅停車日吉（神奈川県）いき'],10:['3分各駅停車日吉（神奈川県）いき','10分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','19分各駅停車日吉（神奈川県）いき','26分各駅停車日吉（神奈川県）いき','32分急行武蔵小杉いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','55分各駅停車日吉（神奈川県）いき'],11:['2分急行武蔵小杉いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],12:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],13:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],14:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],15:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],16:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],17:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','23分各駅停車日吉（神奈川県）いき','29分各駅停車日吉（神奈川県）いき','35分急行日吉（神奈川県）いき','36分各駅停車日吉（神奈川県）いき','42分各駅停車日吉（神奈川県）いき','47分各駅停車日吉（神奈川県）いき','53分急行日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき','58分各駅停車日吉（神奈川県）いき'],18:['2分各駅停車日吉（神奈川県）いき','9分急行日吉（神奈川県）いき','10分各駅停車日吉（神奈川県）いき','14分各駅停車日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分急行日吉（神奈川県）いき','26分各駅停車日吉（神奈川県）いき','29分各駅停車日吉（神奈川県）いき','32分各駅停車武蔵小杉いき','37分急行日吉（神奈川県）いき','38分各駅停車日吉（神奈川県）いき','42分各駅停車日吉（神奈川県）いき','46分各駅停車日吉（神奈川県）いき','52分急行日吉（神奈川県）いき','53分各駅停車日吉（神奈川県）いき','58分各駅停車日吉（神奈川県）いき'],19:['3分各駅停車日吉（神奈川県）いき','8分急行武蔵小杉いき','9分各駅停車日吉（神奈川県）いき','14分各駅停車武蔵小杉いき','18分各駅停車日吉（神奈川県）いき','22分急行日吉（神奈川県）いき','23分各駅停車日吉（神奈川県）いき','26分各駅停車武蔵小杉いき','30分各駅停車日吉（神奈川県）いき','37分急行日吉（神奈川県）いき','38分各駅停車日吉（神奈川県）いき','42分各駅停車日吉（神奈川県）いき','46分各駅停車武蔵小杉いき','52分急行日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき','58分各駅停車日吉（神奈川県）いき'],20:['2分各駅停車日吉（神奈川県）いき','8分急行武蔵小杉いき','9分各駅停車日吉（神奈川県）いき','14分各駅停車日吉（神奈川県）いき','17分各駅停車日吉（神奈川県）いき','22分急行日吉（神奈川県）いき','23分各駅停車武蔵小杉いき','28分各駅停車日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分急行日吉（神奈川県）いき','40分各駅停車日吉（神奈川県）いき','45分各駅停車武蔵小杉いき','52分各駅停車日吉（神奈川県）いき','59分急行日吉（神奈川県）いき'],21:['0分各駅停車日吉（神奈川県）いき','5分各駅停車日吉（神奈川県）いき','10分各駅停車日吉（神奈川県）いき','16分各駅停車日吉（神奈川県）いき','22分各駅停車日吉（神奈川県）いき','29分急行日吉（神奈川県）いき','30分各駅停車日吉（神奈川県）いき','37分各駅停車日吉（神奈川県）いき','40分各駅停車日吉（神奈川県）いき','47分各駅停車日吉（神奈川県）いき','53分急行日吉（神奈川県）いき','55分各駅停車日吉（神奈川県）いき'],22:['0分各駅停車日吉（神奈川県）いき','7分各駅停車日吉（神奈川県）いき','14分各駅停車日吉（神奈川県）いき','19分各駅停車日吉（神奈川県）いき','26分急行日吉（神奈川県）いき','27分各駅停車日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','40分各駅停車日吉（神奈川県）いき','46分各駅停車日吉（神奈川県）いき','52分各駅停車日吉（神奈川県）いき','58分各駅停車日吉（神奈川県）いき'],23:['4分急行日吉（神奈川県）いき','6分各駅停車日吉（神奈川県）いき','12分各駅停車日吉（神奈川県）いき','20分各駅停車日吉（神奈川県）いき','26分各駅停車日吉（神奈川県）いき','34分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','45分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき']}
MeguroTimeTable = {
"00007964_saturday_0": {"title": "目黒線 武蔵小山駅 土日祝 上り 時刻表  取得日時: 2021-11-08 18:50:27",{0:['8分各駅停車目黒いき','21分各駅停車目黒いき','34分各駅停車目黒いき'],5:['7分各駅停車西高島平いき','20分各駅停車西高島平いき','32分各駅停車浦和美園いき','42分各駅停車浦和美園いき','46分各駅停車西高島平いき','55分各駅停車西高島平いき'],6:['5分各駅停車浦和美園いき','15分各駅停車浦和美園いき','25分各駅停車西高島平いき','35分各駅停車西高島平いき','43分各駅停車浦和美園いき','49分各駅停車西高島平いき','55分各駅停車浦和美園いき'],7:['3分各駅停車浦和美園いき','10分各駅停車西高島平いき','16分各駅停車西高島平いき','23分各駅停車西高島平いき','28分各駅停車鳩ヶ谷いき','35分各駅停車浦和美園いき','40分各駅停車西高島平いき','43分各駅停車鳩ヶ谷いき','46分各駅停車浦和美園いき','52分急行西高島平いき','54分各駅停車浦和美園いき','59分各駅停車浦和美園いき'],8:['6分急行西高島平いき','8分各駅停車浦和美園いき','15分各駅停車浦和美園いき','21分急行西高島平いき','23分各駅停車浦和美園いき','30分各駅停車西高島平いき','36分急行西高島平いき','38分各駅停車赤羽岩淵いき','45分各駅停車西高島平いき','51分急行赤羽岩淵いき','52分各駅停車西高島平いき','58分各駅停車王子神谷いき'],9:['5分急行西高島平いき','6分各駅停車赤羽岩淵いき','11分各駅停車浦和美園いき','18分急行浦和美園いき','20分各駅停車高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],10:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],11:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],12:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],13:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],14:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],15:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],16:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行赤羽岩淵いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],17:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車赤羽岩淵いき','18分急行浦和美園いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車浦和美園いき','41分各駅停車赤羽岩淵いき','48分急行浦和美園いき','50分各駅停車西高島平いき','56分各駅停車西高島平いき'],18:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車浦和美園いき','18分急行赤羽岩淵いき','20分各駅停車西高島平いき','26分各駅停車西高島平いき','33分急行西高島平いき','35分各駅停車赤羽岩淵いき','41分各駅停車浦和美園いき','48分急行浦和美園いき','50分各駅停車西高島平いき','56分各駅停車高島平いき'],19:['3分急行西高島平いき','5分各駅停車浦和美園いき','11分各駅停車高島平いき','17分各駅停車浦和美園いき','24分急行浦和美園いき','26分各駅停車西高島平いき','32分各駅停車西高島平いき','38分各駅停車赤羽岩淵いき','44分各駅停車西高島平いき','50分各駅停車浦和美園いき','59分急行西高島平いき'],20:['0分各駅停車赤羽岩淵いき','6分各駅停車浦和美園いき','13分各駅停車西高島平いき','20分各駅停車赤羽岩淵いき','27分急行西高島平いき','28分各駅停車浦和美園いき','34分各駅停車西高島平いき','40分各駅停車浦和美園いき','46分各駅停車西高島平いき','51分各駅停車浦和美園いき','56分各駅停車西高島平いき'],21:['2分急行西高島平いき','4分各駅停車赤羽岩淵いき','10分各駅停車浦和美園いき','17分各駅停車西高島平いき','21分各駅停車浦和美園いき','27分各駅停車西高島平いき','35分急行西高島平いき','36分各駅停車浦和美園いき','43分各駅停車浦和美園いき','49分各駅停車西高島平いき','55分各駅停車西高島平いき'],22:['1分急行浦和美園いき','2分各駅停車西高島平いき','8分各駅停車西高島平いき','14分各駅停車赤羽岩淵いき','21分各駅停車西高島平いき','28分各駅停車浦和美園いき','34分各駅停車西高島平いき','42分各駅停車西高島平いき','52分各駅停車浦和美園いき'],23:['2分各駅停車西高島平いき','11分各駅停車西高島平いき','20分各駅停車赤羽岩淵いき','29分各駅停車浦和美園いき','39分各駅停車西高島平いき','49分各駅停車高島平いき','55分各駅停車駒込いき']}
MeguroTimeTable = {
"00007964_saturday_1": {"title": "目黒線 武蔵小山駅 土日祝 下り 時刻表  取得日時: 2021-11-08 18:50:29",{0:['4分各駅停車日吉（神奈川県）いき','10分各駅停車日吉（神奈川県）いき','23分各駅停車武蔵小杉いき','34分各駅停車奥沢いき'],5:['3分各駅停車日吉（神奈川県）いき','13分各駅停車日吉（神奈川県）いき','19分各駅停車日吉（神奈川県）いき','31分各駅停車日吉（神奈川県）いき','44分各駅停車日吉（神奈川県）いき','52分各駅停車日吉（神奈川県）いき'],6:['0分各駅停車日吉（神奈川県）いき','7分各駅停車日吉（神奈川県）いき','17分各駅停車日吉（神奈川県）いき','28分各駅停車日吉（神奈川県）いき','38分各駅停車日吉（神奈川県）いき','46分各駅停車日吉（神奈川県）いき','52分各駅停車日吉（神奈川県）いき','58分各駅停車日吉（神奈川県）いき'],7:['6分各駅停車日吉（神奈川県）いき','14分各駅停車日吉（神奈川県）いき','21分各駅停車日吉（神奈川県）いき','27分各駅停車日吉（神奈川県）いき','30分各駅停車日吉（神奈川県）いき','38分急行日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','45分各駅停車日吉（神奈川県）いき','51分各駅停車日吉（神奈川県）いき','56分各駅停車日吉（神奈川県）いき'],8:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','8分各駅停車日吉（神奈川県）いき','16分急行日吉（神奈川県）いき','17分各駅停車日吉（神奈川県）いき','23分各駅停車日吉（神奈川県）いき','31分急行日吉（神奈川県）いき','32分各駅停車日吉（神奈川県）いき','38分各駅停車日吉（神奈川県）いき','46分急行日吉（神奈川県）いき','47分各駅停車日吉（神奈川県）いき','53分各駅停車日吉（神奈川県）いき'],9:['1分急行日吉（神奈川県）いき','2分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','16分急行日吉（神奈川県）いき','17分各駅停車日吉（神奈川県）いき','23分各駅停車日吉（神奈川県）いき','31分急行日吉（神奈川県）いき','32分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','46分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','55分各駅停車日吉（神奈川県）いき'],10:['1分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','10分各駅停車日吉（神奈川県）いき','16分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','25分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','34分各駅停車日吉（神奈川県）いき','40分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],11:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],12:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],13:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],14:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],15:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],16:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],17:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','39分各駅停車日吉（神奈川県）いき','47分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき'],18:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車日吉（神奈川県）いき','17分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','24分各駅停車日吉（神奈川県）いき','32分急行日吉（神奈川県）いき','33分各駅停車武蔵小杉いき','39分各駅停車日吉（神奈川県）いき','46分急行日吉（神奈川県）いき','48分各駅停車日吉（神奈川県）いき','53分各駅停車日吉（神奈川県）いき'],19:['1分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','9分各駅停車武蔵小杉いき','16分急行日吉（神奈川県）いき','18分各駅停車日吉（神奈川県）いき','23分各駅停車日吉（神奈川県）いき','31分急行日吉（神奈川県）いき','33分各駅停車日吉（神奈川県）いき','38分各駅停車日吉（神奈川県）いき','44分各駅停車日吉（神奈川県）いき','50分各駅停車日吉（神奈川県）いき','55分各駅停車日吉（神奈川県）いき'],20:['2分急行日吉（神奈川県）いき','3分各駅停車日吉（神奈川県）いき','10分各駅停車日吉（神奈川県）いき','16分各駅停車日吉（神奈川県）いき','22分各駅停車日吉（神奈川県）いき','26分各駅停車日吉（神奈川県）いき','33分急行日吉（神奈川県）いき','34分各駅停車日吉（神奈川県）いき','40分各駅停車日吉（神奈川県）いき','46分各駅停車日吉（神奈川県）いき','50分各駅停車日吉（神奈川県）いき','57分急行日吉（神奈川県）いき','59分各駅停車日吉（神奈川県）いき'],21:['5分各駅停車日吉（神奈川県）いき','12分各駅停車日吉（神奈川県）いき','19分各駅停車日吉（神奈川県）いき','26分急行日吉（神奈川県）いき','28分各駅停車日吉（神奈川県）いき','34分各駅停車日吉（神奈川県）いき','42分各駅停車日吉（神奈川県）いき','51分各駅停車日吉（神奈川県）いき','58分急行日吉（神奈川県）いき'],22:['0分各駅停車日吉（神奈川県）いき','6分各駅停車日吉（神奈川県）いき','13分各駅停車日吉（神奈川県）いき','19分各駅停車日吉（神奈川県）いき','27分急行日吉（神奈川県）いき','28分各駅停車日吉（神奈川県）いき','35分各駅停車日吉（神奈川県）いき','44分各駅停車日吉（神奈川県）いき','52分各駅停車日吉（神奈川県）いき'],23:['0分各駅停車日吉（神奈川県）いき','8分各駅停車日吉（神奈川県）いき','17分各駅停車日吉（神奈川県）いき','26分各駅停車日吉（神奈川県）いき','36分各駅停車日吉（神奈川県）いき','45分各駅停車日吉（神奈川県）いき','54分各駅停車日吉（神奈川県）いき']
      }

    # 0 for Mon.
    if (jsttime.weekday() >= 5) or jpholiday.is_holiday(jsttime):
        horw = "saturday" # horiday or weekday. saturday for 東急時刻表ページ
        horw_jp = "休日"
    else:
        horw = "weekday"
        horw_jp = "平日"

    TBname = f"{StCode}_{horw}_{UpDown}" # TimeTableName
    nextTrain = Train(TimeTable[TBname], jsttime.hour, jsttime.minute)
    if 0 in nextTrain:
        idx = nextTrain.index(0)
        nextTrain[idx] = '0 '

    day = '<speak>{}の時刻表です。次は<say-as interpret-as="time">{}分??秒</say-as>,<say-as interpret-as="time">{}分??秒</say-as>,<say-as interpret-as="time">{}分??秒</say-as>です。</speak>'.format(horw_jp, nextTrain[0], nextTrain[1], nextTrain[2])

    response = {
        'version': '1.0','response': {
            'outputSpeech': {
                'type': 'SSML','ssml': day
            }
        }
    }
    return response
